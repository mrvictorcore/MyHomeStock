<div class="container">
  <div class="table-responsive shadow-lg p-3 mb-5 bg-white rounded">
    <h1 class="mt-4 text-center display-4 custom-title">Compra</h1>

    <div class="row">
      <div class="col-12">
        <div class="form-group">
          <select id="listaCompra" class="form-control custom-select" [(ngModel)]="listaCompraSeleccionada" (change)="filtrarProductosPorCompraSeleccionada()">
            <option *ngFor="let lista of listaCompra" [ngValue]="lista.id">{{ lista.descripcion }}</option>
          </select>
        </div>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-borderless table-hover mt-3">
        <thead>
          <tr>
            <th class="text-center">Producto</th>
            <th class="text-center">comprar</th>
            <th class="text-center">Disponible</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let producto of productosFiltradosListaCompra; let i = index" class="table-row">
            <td class="text-center">{{ producto.nombre_producto }}</td>
            <td class="text-center">{{ producto.cantidad }}</td>
            <td class="text-center">
              <div class="d-flex flex-row align-items-center justify-content-center mb-2">
                <div class="form-group mb-0 mr-2">
                  <select class="form-control form-control-sm" [(ngModel)]="cantidadSeleccionada[producto.id]">
                    <option *ngFor="let cantidad of generarRangoCantidadRestar(producto)" [ngValue]="cantidad">{{ cantidad }}</option>
                  </select>                  
                </div>
              </div>
            </td>
            <td class="text-center">
              <div class="d-flex flex-row align-items-center justify-content-center mb-2">
                <input type="checkbox" [(ngModel)]="producto.seleccionado" name="comprado{{producto.seleccionado}}">
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="form-group mb-0 mr-2 float-right form-group label text-center">
      <label for="checkAuto" class="mr-2 bold-text">Check Auto</label>
      <input type="checkbox" [(ngModel)]="todosSeleccionados" (change)="seleccionarTodos()">
    </div>
    <div class="float-left">
      <button class="btn btn-light" (click)="onCrearCompra()">
        <i class="fas fa-plus"></i>
      </button>
    </div>
    <div class="float-left">
      <button class="btn btn-light" (click)="onEditarCompra()">
        <i class="fas fa-edit"></i>
      </button>
    </div>
    <div class="text-right float-right">
      <button type="button" class="btn btn-secondary custom-btn-size custom-margin-right" (click)="onBorrarClick()">Borrar</button>
      <button type="submit" class="btn btn-primary custom-btn-size" (click)="onConfirmarClick()">Confirmar</button>
    </div>
  </div>
</div>
